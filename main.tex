\input{preamble.tex}
\title{Galois Cohomology of Algebraic Groups}
\author[Ayushi Tsydendorzhiev]{Ayushi Tsydendorzhiev}
\usepackage{enumitem}
\usepackage{stmaryrd}
\usepackage{xhfill}
\usepackage{array}
\usepackage{outlines}
\usepackage{faktor}
\usepackage{float}
\usepackage{mathtools}
\usepackage{tikz-cd}
\usepackage{centernot}
% \usepackage{cleveref}
\usepackage{cancel}
\newcommand{\ra}{\rightarrow}
\newcommand{\lra}{\longrightarrow}
\newcommand{\eps}{\varepsilon}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\acts}{\curvearrowright}
\newcommand\Gal[1]{\operatorname{Gal}({#1})}
\renewcommand{\phi}{\varphi}
\newcommand\discr[1]{\operatorname{discr}({#1})}
\newcommand{\ch}{\operatorname{char}}
\newcommand{\tr}{\operatorname{tr}}
\begin{document}

\maketitle

These notes are my rendition of the lectures given by Prof. Kammeyer to the doctoral students of GRK 2240 in D端sseldorf during winter term 24/25. Sometimes I've expanded and rewritten them sufficiently or added proofs for theorems I didn't know. As of now, I've only taken some algebraic topology and commutative algebra, so these notes may reflect my currently rather limited knowledge. 

\tableofcontents
\clearpage

\section{Introduction}

\subsection{Galois group actions}
\marginnote{Lecture 1, 10.10.2024}
\begin{outline}
\0 Let $L/K$ be a Galois extension and $G=\Gal{L/K}$ its Galois group. The Galois group $G$ acts on $L$ via field automorphisms:
    \1 Action on the field extension $L$: For $\Q(\sqrt{2})$ its Galois group $\Gal{\Q(\sqrt{2})/\Q}$ acts either by identity or by sending $\sqrt{2}$ to $-\sqrt{2}$.
    \1 Action on the dual of the field extension $L^*$: For $\Q(\sqrt{2})^*$ its Galois group acts on $f(x_1,x_2)=x_1\cdot 1 + x_2 \cdot \sqrt{2}$ either by identity or by sending $f$ to $f'=x_1\cdot 1 -x_2 \cdot \sqrt{2}$.
    \1 Action on the group of $n$th roots of unity $\mu_n(L)$: 
        \2 In $\Q(\sqrt{2})$, the $n$th roots of unity consist of $\{-1,1\}$ if $n$ is even and $\{1\}$ if $n$ is odd. Both automorphisms in $\Gal{\Q(\sqrt{2})/\Q}$ leave $\mu_n(\Q)$ fixed, so this tells us that they all belong to the base field (are rational, in this case). 
        \2 A more interesting example is the $n$th cyclotomic field $\Q(\zeta_n)$.In this field $\mu_n (Q(\zeta_n))=\langle \zeta_n \rangle$, the cyclic group generated by $\zeta_n$. The Galois group $\Gal{Q(\zeta_n)/Q}$ is isomorphic to $(\Z/n\Z)^*$. For $n=5$ (prime), the Galois group is cyclic and consists of $\{1, \zeta_5, \zeta_5^2, \zeta_5^3, \zeta_5^4\}$. The action of the Galois group then permutes the $5$th roots of unity. For $n=8$, the Galois group $\Gal{\Q(\zeta_8)/\Q}$ is isomorphic to $(\Z/8\Z)^*=\{1,3,5,7\}$ and is cyclic of order $4$. The basis of $\Q(\zeta_8)$ over $\Q$ is given by $\{1,\zeta_8,\zeta_8^2, \zeta_8^3\}$. The actions is given as: $\sigma_1$ acts trivially, $\sigma_3$ maps $\zeta_8$ to $\zeta_8^3$, $\sigma_5$ acts by multiplication by $-1$ and $\sigma_7$ maps $\zeta_8$ to $\zeta^7_8$.
    \1 Action on the cyclic group $(\Z/n\Z)^*$: same as above.
    \1 Action on a finite abelian group $M$: trivial action.
    \1 Action on the general linear group $\GL_n(L)$ over a field $L$ of characteristic $0$: $\GL_n(L)$ consists of $n\times n$ invertible matrices over $L$. We have a Galois extension $L/K$. The Galois group acts by applying the field automorphisms to the entries of the matrices, so $\sigma(A)=\sigma(a_{ij}) \forall 1\leq ij \leq n$. The fixed points contain $\GL_n(K)$.
        \2 Backstory: The determinant of a $n\times n$ matrix $A$ is defined as 
        \marginnote{$\sgn(\pi)$ is either even or odd. $+1$ if even and $-1$ if odd.}
        $$\det(A) = \sum_{\pi \in S_n} \left( \sgn(\pi) \prod_{i=1}^n a_{i,\pi(i)} \right)$$
        Consider $\sigma(\det (A))$, where $\sigma \in \Gal{L/K}$ is a field automorphism. It distributes over addition and multiplication:
        $$\sigma(\det(A)) = \sum_{\pi \in S_n} \left( \sgn(\pi) \prod_{i=1}^n \sigma(a_{i,\pi(i)}) \right)$$
        The signum is either $+1$ or $-1$, so it is always in the base field $K$ and is fixed by $\sigma$. Thus $\sigma(\det(A))=\det(\sigma(A))$. So the action of the Galois group preserves determinants.
\end{outline}

\subsection{The fixed point functor and exact sequences}

\begin{outline}
\0 All of these examples are special cases of a more general concept: a group $G$ acting on an algebraic group $\bG \subseteq \GL_n$.
\marginnote{An algebraic group is a matrix group defined by polynomial conditions, at least this is what \enquote{The theory of group schemes of
finite type over a field.} by Milne says. I guess this is the consequence of Chevalley theorem?}

When studying group actions, we're often interested in fixed points 
$$A^G =\{a\in A \mid \forall \sigma \in G: \sigma a = a \}$$ 
Here, $A^G$ represents the set of all elements in $A$ that are fixed by every element of $G$. To study fixed points more systematically, we introduce the fixed point functor $-^G$. This functor takes a $\Z G$-module  and returns its fixed points. We're particularly interested in how this functor behaves with respect to exact sequences.

\begin{note}
~\\
\textbf{Group action perspective}: A $\Z G$-module is an abelian group $A$ endowed with a (left) action $(\sigma, a) \mapsto \sigma a$ of $G$ on $A$ such that for all $\sigma\in G$ the map $\phi_\sigma : a \mapsto \sigma a$ from $A$ to $A$ is a morphism of abelian groups. This implies that the action of $G$ is distributive, $\phi_\sigma (ab) = \phi_\sigma (a) + \phi_\sigma (b)$.\\
\textbf{Ring module perspective}: Equivalently, a $\Z G$-module is a module over the group ring $\Z[G]$, where elements consist of formal linear combinations of elements from group $G$ with integer coefficients, so something like $3g_1+4g_2+10g_3 \in \Z[G]$. It contains both $\Z$ and $G$ as subrings.\\
The $\Z[G]$-module structure encapsulates both the abelian group structure of $A$ and the $G$-action on $A$, which leads to the key insight:
$$\{\text{module over } \Z[G]\} \leftrightarrow \{\text{abelian group $A$ with $G$-action}\}$$
\end{note}

\begin{lemma}
    Consider an exact sequence of $\Z G$-modules:
    $$\begin{tikzcd}
    0\arrow[r] & A \arrow[r, "f"] & B\arrow[r, "g"] & C\arrow[r, "h"] & 0
    \end{tikzcd}$$
    Applying the fixed point functor $-^G$ to this sequence yields:
    $$\begin{tikzcd}
    0\arrow[r] & A^G \arrow[r, "f^G"] & B^G \arrow[r, "g^G"] & C^G
    \end{tikzcd}$$
    This new sequence is exact in Ab (the category of abelian groups). Thus the functor $-^G$ is left-exact, meaning it preserves exactness at the left end of the sequence.
\end{lemma}

    \1 A natural question arises: Is the fixed point functor also right-exact? If such a lifting always exists, then the fixed point functor preserves exactness at $C$, making it right-exact.
    If not, we've discovered an obstruction that tells us something about the Galois action and the structure of our groups.
    \1 To investigate this, we need to check if $\ker h^G = \im g^G$, or equivalently, if $\im g^G = C^G$. Breaking this down:
        \2 Take any $c \in C^G$. 
        \2 Since $C^G \subseteq C$, there exists a $b \in B$ such that $g(b) = c$.
        \2 If $b$ were fixed by $G$, we'd be done. But it might not be. 
        \marginnote{Why $\sigma b = b$?}
            \3 Consider $\sigma b - b$ for any $\sigma \in G$. We have $g(\sigma b - b) = g(\sigma b) - g(b)= \sigma g(b)-g(b)=\sigma c - c$. 
            \3 Since $c\in C^G$, $\sigma c - c = 0$ and $(\sigma b-b)\in \ker g$.
            \3 By exactness, $\ker g = \im f$, so $\sigma b - b \in \im f$.
            \3 We can view this as an element of $A$ (considering $f$ as an inclusion $A \subseteq B$).
            \marginnote{Also, $C\cong B / \im f$. Or consider presentations of groups.}
    \1[] So the question of right-exactness boils down to whether or not every $G$-invariant element of $C$ can be lifted to a $G$-invariant element of $B$ and the obstruction to it lives inside of $A$. 
    \marginnote{And if $b$ were indeed in $B^G$ then $(\sigma b -b)=0\in A$.}
    \1 This analysis leads us to define a map (for a given $c\in C^G$):
    $$\phi: G \to A, \quad \sigma \mapsto \sigma b - b =: a_\sigma$$
    This map is called a crossed homomorphism (also known as a derivation or 1-cocycle). It measures how far $b$ is from being $G$-invariant. If $b$ were $G$-invariant, this map would be identically $0$! Note that this is independent of any $b$ taken such that $g(b)=c$. Such cocycles are cohomologous.
    
\begin{proposition}
    The map $\sigma \mapsto a_\sigma$ satisfies:
    $$a_{\sigma\tau} = a_\sigma + \sigma a_\tau$$
    This property is what defines a crossed homomorphism.
\end{proposition}

    \1 \textbf{In the abelian case}, we define 
        \2 $Z^1(G,A)=\{a':G\ra A \mid a'_{\sigma \tau} = a'_{\sigma}+\sigma a'_{\tau}\}$, the set of all crossed homomorphisms from $G$ to $A$.
        \2 $B^1(G,A)=\{a:\sigma \in Z^1(G,A) \mid \exists a'\in A : a_\sigma = \sigma a' - a'\}$. 
        \2 The quotient $H^1(G,A) = Z^1(G,A) / B^1(G,A)$ is called the \textbf{first cohomology group} of $G$ with coefficients in $A$. It measures the obstruction to the right-exactness of the fixed point functor.
        \marginnote{The functor $A\mapsto H^1(G,A)$ is a derived functor of the $A\mapsto A^G$ functor.}
    
    \1[] The obstructions for right-exactness: find $\sigma b -b \in A$ such that it is $0$ under projection in $Z^1(G,A)/B^1(G,A)$. It is given by $\delta(c) = [a_\sigma]\in H^1(G,A) = Z^1(G,A)/B^1(G,A)$. We can extend our original sequence to a longer exact sequence:
    $$\begin{tikzcd}[column sep=small]
    0 \arrow[r] & A^G \arrow[r] & B^G \arrow[r] & C^G \arrow[r, "\delta"] & H^1(G,A) \arrow[r] & H^1(G,B) \arrow[r] & H^1(G,C) \arrow[r] & 0
    \end{tikzcd}$$
    This sequence is exact in Ab, and the map $\delta$ (called the connecting homomorphism) measures the failure of right-exactness of the fixed point functor, since $\ker \delta$ represents all elements of $C^G$ which can be lifted to elements of $B^G$.
    \marginnote{In field theory, $H^1(G,A)$ can represent the obstruction to an element being a norm.
    In the theory of algebraic groups, $H^1(G,A)$ can represent the obstruction to a torsor having a rational point.}
    \1 The key idea of the 1-cocycle is to encode the failure of $G$-invariance in a way that's compatible with the group structures involved. It allows us to move from concrete elements ($b$ and $c$) to cohomological objects ($[\phi]$) that capture essential information about the Galois action and the relationship between our groups $A$, $B$, and $C$.
    This approach transforms specific lifting problems into more general cohomological questions, allowing us to apply powerful theoretical tools and gain deeper insights into the structures we're studying.

\begin{exercise}
    Show that $H^1(G,-)$ is functorial and 
    $$\begin{tikzcd}[column sep=small]
    0 \arrow[r] & A^G \arrow[r] & B^G \arrow[r] & C^G \arrow[r] & H^1(G,A) \arrow[r] & H^1(G,B) \arrow[r] & H^1(G,C) \arrow[r] & 0
    \end{tikzcd}$$
    is exact. Find example with $\delta \neq 0$.
\end{exercise}

    \1 \textbf{In the non-abelian case}, we define 
        \2 $H^0(G,A)=A^G$, the fixed points as before. 
        \2 $H^1(G,A)=Z^1(F,A)/\sim$, where $\sim$ is an equivalence relation defined by: $a_\sigma \sim b_\sigma \iff \exists a' \in A : b_\sigma = (a')^{-1} \cdot a_\sigma \cdot \prescript{\sigma}{}{a'}$. 
        \marginnote{We cannot expect $B^1(G,A)$ to be a subgroup. Why?}
        \marginnote{$\prescript{\sigma}{}{a}$ denotes the action of $\sigma$ on $a$.}
    \1[] In this case, $H^1(G,A)$ doesn't have a group structure, but is a pointed set (a set with a distinguished element). We can still define a notion of exactness for sequences of pointed sets.
\marginnote{Exactness in pointed sets $(A,*)$ is defined as $\im f = \ker g = g^{-1}(*)$}

\marginnote{$A\leq_G B$ is $G$-equivariant inclusion.}
\begin{proposition}
    For $A\leq_G B$, we obtain $G\acts B/A$ and 
    $$\begin{tikzcd}[column sep=small]
    1 \arrow[r] & H^0(G,A) \arrow[r] & H^0(G,B) \arrow[r] & H^0(G,C) \arrow[r] & H^1(G,A) \arrow[r] & H^1(G,B)
    \end{tikzcd}$$
    is exact.
\end{proposition}

This is the \textbf{Galois cohomology}. Why do we care? In the non-commutative case $H^1(G,A)$ classifies \enquote{K-objects}. In our lecture we will use this to classify simple and simply connected linear algebraic $k$-groups $\bG$.

\end{outline}

\section{Preliminaries from algebraic number theory.}
\marginnote{Lecture 2, 17.10.24}
\marginnote{User: GRK, password: 2240.}

\subsection{Number fields}
\begin{outline}
    \begin{definition}
        An algebraic number field is a finite field extension $k/\Q$. 
    \end{definition}
    \marginnote{\enquote{The concept of algebraic integer was one of the most important discoveries of number theory. It is not easy to explain quickly why it is the right definition to use, but roughly speaking, we can think of the leading coefficient of the primitive irreducible polynomials $f(x)$ as a \enquote{denominator}.If $\alpha$ is the root of an integer polynomial $f(x)$=$dx^n+a_{n-1}x^{n-1}+\ldots$, then $d\alpha$ is an algebraic integer, because it is a root of the monic integer polynomial $x^n+a_{n-1}x_{n-1}+\ldots+d^{n-1}a_0$.\\
    Thus we can \enquote{clear the denominator} in any algebraic number by multiplying it with a suitable integer to get an algebraic integer.} --- Artin, Algebra.}
        \1 This definition implies the following properties:
            \2 The field $k$ has characteristic 0.
            \2 By the Primitive Element Theorem, $k = \mathbb{Q}(a)$ for some $a \in K$.
            \2 There exists a unique minimal polynomial $f \in \mathbb{Q}[X]$ for $a$, with $\deg(f) = d = [k:\mathbb{Q}]$.
        \1 Let $(a_1, \ldots, a_d)$ be the roots of $f$ in the algebraic closure of $\mathbb{Q}$ within $\mathbb{C}$. These roots are called the \textbf{Galois conjugates} of $a$. Note that these roots do not lie in $\mathbb{Q}$.
        \1 Properties of embeddings:
            \2 For each $i$, the map $a \mapsto a_i$ defines an isomorphism $\mathbb{Q}(a) \cong \mathbb{Q}(a_i)$.
            \2 Any embedding $k\rightarrow \mathbb{C}$ must send $a$ to some $a_i$.
            \2 There are exactly $d$ embeddings $k \rightarrow \mathbb{C}$, denoted $\sigma_1, \ldots, \sigma_d$.
        \1 Classification of embeddings:        
            \2 Note that $(a_1, \ldots, a_d) = \overline{(a_1, \ldots, a_d)}$, so $\sigma_i(k) \subseteq \mathbb{R}$ if and only if $\overline{a_i} = a_i$.
            \2 We can thus classify the embeddings as:
                \3 Real embeddings (real places of $K$): $r_1$
                \3 Complex embeddings (complex places of $K$): $2r_2$ (counted in pairs due to complex conjugation)
            \2 This classification implies $d = r_1 + 2r_2$
        \1 Examples:
            \2 For $k = \mathbb{Q}(\sqrt[3]{2})$: $r_1 = 1, r_2 = 1$
            \2 For $k = \mathbb{Q}(\exp(2\pi i/n))$, $n \geq 3$: $r_1 = 0, r_2 = \phi(n)/2$ (odd $n$)
    \0 \begin{definition}
        For any $\alpha \in K$, we define two rational numbers:\\
        1. The norm: $N_{K/\mathbb{Q}}(\alpha) = \prod_{i=1}^d \sigma_i(\alpha)$\\
        2. The trace: $Tr_{K/\mathbb{Q}}(\alpha) = \sum_{i=1}^d \sigma_i(\alpha)$
    \end{definition}
    \marginnote{Note: $N_{K/\mathbb{Q}}(\alpha) = \det(\alpha: K \rightarrow K)$, and similarly for the trace.}
        \1 Basis criterion: Let $(\alpha_1,\ldots,\alpha_d)\in k$ and $\lambda_1,\ldots,\lambda_d\in\Q$. Then $\sum_{i=1}^d \lambda_i\alpha_i = 0 \iff \sum_{i=1}^d \lambda_i \sigma_j(\alpha_i)=0$ for all $j$. 
        Moreover, $\{\alpha_i\}_{i=1}^d$ is a basis of $k$ if and only if $\det(\sigma_i(\alpha_j))\neq 0$.
    \0 \begin{definition}
        The \textbf{discriminant} of a basis $\{\alpha_1,\ldots,\alpha_d\}$ of a number field $k$ of degree $d$ over $\Q$ is defined as: $\discr{\{\alpha_1,\ldots,\alpha_d\}}=\det^2(\sigma_i(\alpha_j))\in\Q$, where $\sigma_1,\ldots,\sigma_d$ are the $d$ distinct embeddings of $k$ into $\bC$.
    \end{definition}
    \begin{exercise}
        Prove that $\discr{\alpha_i} = \det(Tr_{k/\Q}(\alpha_i\alpha_j))_{1 \leq i,j \leq d}$. Show that if $k = \Q(a)$ for some $a \in k$, then $\discr{\{1,a,a^2,\ldots,a^{d-1}\}} = \prod_{1 \leq i < j \leq d}(\sigma_i(a)-\sigma_j(a))^2$.
    \end{exercise}
    \0 To introduce relative versions for an extension $l/k$, we define the relative discriminant $\discr{}_{l/k}$ using only those embeddings $\sigma_i : l \hookrightarrow \mathbb{C}$ which restrict to the identity on $k$.
\end{outline}

\subsection{Integrality in number fields}

\begin{outline}
    \marginnote{Algebraic number theory is not (algebraic) number theory but rather (algebraic number) theory.}
    \0 Let $k$ be an algebraic number field for the following discussion.
    \begin{definition}
        The ring of integers in $k$ is defined as:
        $$\cO_k=\{\alpha \in k : f(\alpha)=0 \text{ for some monic }f\in \Z[X]\}=\overline{Z}^k.$$
    \end{definition}
        \1 Example: $\cO_\Q = \Z$. It is often referred to as the ring of \enquote{rational integers}.
    \0 \begin{proposition}
        For $(\alpha_1,\ldots,\alpha_r)\in k$, the following are equivalent:\\
        1. $(\alpha_1,\ldots,\alpha_r)\in\cO_k$\\
        2. $\Z[\alpha_1,\ldots,\alpha_r]$ is finitely generated as a $\Z$-module.
    \end{proposition}
    \textit{Proof:} $\implies$ If each $\alpha_i \in \cO_k$, then it satisfies a monic polynomial with integer coefficients. Let the minimal polynomial of $\alpha_i$ be: $f_i(x)=x^{n_i}+a^{(i)}_{n_i-1}x^{n_i-1}+\ldots + a^{(i)}_{1}x + a^{(i)}_0$ where each $a^{(i)}_j\in \Z$. From the minimal polynomial, we can express any higher power of $\alpha_i$ as a $\Z$-linear combination of lower powers:
    $$\alpha_i^{n_i} = -\sum_{j=1}^{n_i} a^{(i)}_{n_i-j}\alpha_i^{n_i-j}$$
    This means that the set $\{1,\alpha_i,\alpha_i^2,\ldots,\alpha_i^{n_i-1}\}$ spans $\Z[\alpha_i]$ as a $\Z$-module. (As any higher power is a $\Z$-linear combination of elements from the set and any lower power is already in the set). Now consider all monomials of the form $\alpha_1^{e_1} \alpha_2^{e_2} \ldots \alpha_r^{e_r}$, where $0\leq e_i< n_i$. They cover all possible combination of the $\alpha_i$'s up to the power $n_i-1$ for each $\alpha_i$. Any higher powers can be reduced to linear combinations of these monomials using the minimal polynomials. As such, $\Z[\alpha_1, \ldots, \alpha_r]$ is spanned by $N=n_1 n_2 \ldots n_r$ such monomials and therefore is finitely generated over $\Z$. $\impliedby$ This part is trickier, so we will skip it (keyword transformations, Cayley-Hamilton, characteristic polynomial).\qed
    % Assume that $\Z[\alpha_1,\ldots,\alpha_r]$ is finitely generated as a $\Z$-module by some $\beta_1,\ldots,\beta_n$. 
    % As such we can express any $\alpha_i$ as a $\Z$-linear combination of $\beta_j$. This means there is a system of linear equations relating $\alpha_i$'s to $\beta_j$'s. 
    % \begin{align*}
    % \begin{cases}
    %     \alpha_1 = \sum_{j=1}^n b_j^{(1)} \beta_j \\
    %     \alpha_2 = \sum_{j=1}^n b_j^{(2)} \beta_j \\
    %     \ldots \\
    %     \alpha_r = \sum_{j=1}^n b_j^{(r)} \beta_j
    % \end{cases}
    % \end{align*}
    % This defines a $\Z$-linear map from $\Z[\alpha_1,\ldots,\alpha_r]$ to itself, whose charactersistic polynomial satisfies Cayley-Hamilton. As such it is $0$ for the vector $x=(\alpha_1,\ldots,\alpha_r)$.
    % Let $x\in\Z[\alpha_1,\ldots,\alpha_r]$, then $x$ can be expressed as a polynomial in the $\alpha_i$'s with integer coefficients.
    
    \1 Since for $\alpha,\beta \in \cO_k$ their sum $\Z[\alpha+\beta]$ and multiplication $\Z[\alpha\cdot\beta]$ are also finitely generated, $\cO_k$ is a ring.
    
    \0 \begin{lemma}
        For $\alpha \in k$, there exist $\beta \in \cO_k, n\in\Z$ such that $\alpha=\frac{\beta}{n}$.
    \end{lemma}
    
    From now on we can assume that our algebraic number field is generated by a primitive element which is an algebraic integer.
    
    \begin{proposition}
        Let $k$ be of degree $d$ over $\mathbb{Q}$, and let $a$ be a primitive element of $k$. Then 
        $$\mathbb{Z}[a] \subseteq \mathcal{O}_k \subseteq \frac{1}{\discr{1,a,\ldots,a^{d-1}}} \mathbb{Z}[a]$$
        Because $\mathcal{O}_k$ lies between two free abelian groups of the same rank, it must be a free abelian group of the same rank.
    \end{proposition}
    \marginnote{(Note: $\frac{1}{\discr{1,a,\ldots,a^{d-1}}}$ is in $\mathbb{Z}$ because it is in the intersection of algebraic integers in $k$ and $\mathbb{Q}$.)}
    
    \begin{corollary}
        $\cO_k$ has a $\Z$-basis of rank $d$. Any such basis is called an integral basis.
    \end{corollary}
    (Note: This relates to the theory of lattices in $\mathbb{Q}$-vector spaces and Minkowski's geometry of numbers. The covolumes of these lattices play a crucial role in understanding the structure of $\mathcal{O}_k$.)
    
    \begin{corollary}
        $\cO_k$ is noetherian. 
    \end{corollary}
    
    \begin{definition}
        The discriminant of $k$, denoted by $\discr{}_k$ or $d_k$ is given by $\discr{ \alpha_1, \ldots, \alpha_d }$ for any integral basis $\{\alpha_1,\ldots,\alpha_d\}$. This is well-defined because the change of basis matrix has determinant $\det(T...)=\pm 1$.
    \end{definition}
    
    More generally, we can also define relative discriminants $d_{L/K}$ for a field extension $L/K$ as $d_{L/K} = \discr{\beta_i}$ where ${\beta_i}$ is a relative integral basis. This $d_{L/K}$ is an ideal in $\cO_K$, as we might not be in a principal ideal domain anymore.

    
    \begin{exercise}
        Let $k = \mathbb{Q}(\sqrt{D})$, where $D$ is a square-free integer. Show that:\\
        a) If $D \equiv 1 \pmod{4}$, then an integral basis is ${1, \frac{1+\sqrt{D}}{2}}$ and $d_k = D$.\\
        b) If $D \equiv 2,3 \pmod{4}$, then an integral basis is ${1, \sqrt{D}}$ and $d_k = 4D$.
    \end{exercise}
    \textit{Solution:} 
    \marginnote{Fun fact: for any $x$ in a number field, TFAE:\\
    a) The norm $N(x)$,\\
    b) The determinant of $x$ in matrix representation $A$,\\
    c) The constant term of the characteristic polynomial of $A$.\\
    Fun fact 2: for any $x$ in a number field,\\
    a) The trace of $A$ is the coefficient of second highest degree in the characteristic polynomial of $A$.\\
    Thus trace $\tr_k(x)$ and $\det_k(x)$ completely determine $\ch_k(x,T)$ of degree $2$.}
        \1 Suppose $a+b\sqrt{D} \in \cO_k$ with $a,b\in \Q$. Then 
        $$a + b\sqrt{D} = \begin{pmatrix} a & bD \\ b & a \end{pmatrix} =:A\in M_2(\mathbb{Q}),$$
        since $(a+b\sqrt{D})(x+y\sqrt{D})=ax+(ay+bx)\sqrt{D}+byD$. This is the product of multiplation with the \enquote{real} part $ax+byD$ and the \enquote{imaginary} part $(ay+bx)\sqrt{D}$. 
        \1 Since multiplication by $a+b\sqrt{D}$ acts like multiplication by the matrix representation, consider its characteristic polynomial $\ch(x,T)=T^2-2aT+a^2-b^2D$.
            \2 The constant term is $N_k(x)$.
            \2 The coefficient of $T$ is $-\tr_k(x)$.
        \1 For $x$ to be an algebraic integer, we need 
            \2 $N_k(a+b\sqrt{D})=a^2-b^2D\in \Z$ 
            \2 $\tr_k(x)=2a\in \Z$.
        \1 Case-by-case: assume the above is true.
            \2 If $a\in\Z$, then $b^2D \in\Z$. Since $D$ is square-free and $b^2=\frac{q^2}{p^2}$, it cannot cancel out the denominator $p^2$ completely. So $b^2 \in \Z$, thus $b\in\Z$ since we are working in $\Q$. This implies that $\{1,\sqrt{D}\}$ is the integral basis and $\Z + \Z\sqrt{D}=\cO_k$
            \2 If $a\not\in\Z$, then from trace condition it is a completely reduced proper fraction of the form $\frac{2k+1}{2}\in\Q$. By the norm equation, $(\frac{2k+1}{2})^2-b^2D \in\Z$.
                \3 Let's look at $(2a)^2-(2b)^2D\in\Z$. We have $2(a)^2 = (2k+1)^2\in\Z$, so $(2b)^2D\in\Z$. Since $D$ is square-free, $(2b)^2\in\Z$, therefore $2b\in\Z$.
                \3 Say, $2b=m\in\Z$, then $b=\frac{m}{2}$. Plug this back into the original norm equation:
                \2[] $$N(a+b\sqrt{D})=a^2-b^2D = (\frac{2k+1}{2})^2-(\frac{m}{2})^2D = \frac{4k^2+4k+1}{4}-\frac{m^2D}{4}\in \Z$$
            \2 This fraction is integer if the numerator is $0 \bmod (4)$. 
                \3 If $m$ is odd, then $m=2l+1$ and $m^2=4l^2+4l+1$, so we have $4(k^2-l^2D+k-lD)+(1-D)$, which is divisible by $4$ when $1-D=4$ or $D=1 \bmod (4)$.
                \3 If $m$ is even, then we have $\frac{1}{4}\not\in\Z$. This implies that if $D=2,3\bmod (4)$, then half-integers don't work and $a,b\in\Z$.
                \3 Normalizing $a$ and $b$ for $D=1\bmod (4)$ gives: $\frac{(2k+1}{2}+\frac{(2l+1)}{2}\sqrt{D} = k + l\sqrt{D}+ \frac{1+\sqrt{D}}{2}$, so $\cO_k=\Z+\Z(\frac{1+\sqrt{D}}{2})$.
\end{outline}

\subsection{The arithmetic of algebraic integers}

\begin{outline}
    \1 Example: Consider the number field $k = \mathbb{Q}(\sqrt{-5})$. In this field:
        \2 The ring of integers is $\mathcal{O}_k = \mathbb{Z}[\sqrt{-5}]$.
        \2 We have the factorization: $21 = 3 \cdot 7 = (1+2\sqrt{-5}) \cdot (1-2\sqrt{-5})$. All factors in this factorization are irreducible. This demonstrates that $\mathcal{O}_k$ is not a Unique Factorization Domain (UFD). (Consider norm of an algebraic number$\ldots$)
        \2 Kummer's idea of ideal numbers was to address this lack of unique factorization. He proposed the concept of \enquote{ideal numbers} $p_1, p_2, p_3, p_4$ such that:
            $p_1 \cdot p_2 = 3$,
            $p_3 \cdot p_4 = 7$,
            $p_1 \cdot p_3 = 1 + 2\sqrt{-5}$,
            $p_2 \cdot p_4 = 1 - 2\sqrt{-5}$.
        This would lead to: $21 = p_1p_2p_3p_4 = p_1p_3p_2p_4$, differing only by permutation.
        \2 Properties of these ideal numbers:
            \3 $p_1 | 3$ and $p_1 | (1+2\sqrt{-5})$
            \3 $p_1 | (\lambda \cdot 3 + \mu \cdot (1+2\sqrt{-5}))$ for any $\lambda, \mu \in \mathcal{O}_k$
        \2 This suggests defining $p_1$ as the set of all $\alpha \in \mathcal{O}_k$ that it divides.
        We can thus represent these "ideal numbers" as ideals:
            $p_1 = (3, 1+2\sqrt{-5})$,
            $p_2 = (3, 1-2\sqrt{-5})\ldots$
    \1[] This approach leads to the idea of achieving unique factorization in terms of ideals rather than elements.
\0 \begin{theorem}
    The ring $\cO_k$ is noetherian, integrally closed and of dimension $1$.
\end{theorem}

These three properties characterize a fundamental class of rings in algebraic number theory:

\begin{definition}
An integral domain satisfying these three properties is called a \textbf{Dedekind domain}. 
\end{definition}
\end{outline}

The significance of Dedekind domains lies in their unique factorization property for ideals, which generalizes the unique factorization of elements in UFDs.

\marginnote{Lecture 3, 31.11.24}

\begin{outline}
\0 \begin{theorem}
    Every ideal $a$ not $0$ and not $1$ in a Dedekind domain has a unique factorization $a=p_1 p_2$ into prime ideals $p_i$. 
\end{theorem}

How do we get inverses of ideals? (We strive to treat them as ideal numbers, remember). Let $\cO$ be a Dedekind domain with field of fractions $K$

\0 \begin{definition}
    A \textbf{fractional ideal} of $K$ is any finitely generated $\cO$-submodule of $K$.
\end{definition}

\1 Examples: $(a)$ for $a\in K^*$, every integral ideal $a\subseteq \cO$.

\1 Observe: An $\cO$-module $a\subseteq K^*$ is a fractional ideal iff there exists $0\neq c \in \cO$ such that $c\cdot a \subseteq \cO$. Hence for $a\neq 0$, the set $a^{-1}=\{x\in K : x\cdot a \subseteq \cO\}$ is a fractional ideal. If we define multiplication of ideals $a\cdot b$ as usual (finite sums and products), then $(1) \cdot a = a$ and $a\cdot a^{-1}=(1)$. The element $c$ can be thought of as clearing out the denominators in $a$.

\0 \begin{definition}
    The fractional ideals form abelian group $J_K$ called the \textbf{ideal group} of $K$.
\end{definition}

\0 \begin{corollary}
    For $a \in J_K$, we have a unique decomposition $a = \prod_{(0)\neq p}p^{v_p}$ with $v_p \in \Z$ and almost all $v_p = 0$.
\end{corollary}

\1 So $J_K$ is free abelian with basis $Spec \cO \setminus \{(0)\}$. Let $P_K = \{(a) : a \in K^*\}$ be the subgroup of \textbf{principal fractional ideals}.

\0 \begin{definition}
    The (ideal) \textbf{class group} of $K$ is $Cl_K=\delta_K / P_K$. Hence: 
    $1 \ra \cO^* \ra K^* \ra J_K \ra Cl_K \ra 1$ is exact, so $(a_K / \cO^*)$ describes the $(gain/loss)$ when passing from numbers to ideal numbers.
\end{definition}
\marginnote{Loss or gain, are the same.}

\1 Need to study $a_K$ and $\cO^*$. Back to $K=k$ and $\cO = \cO_k$. Further without proofs:

\0 \begin{theorem}
    The class group $Cl_k$ is finite. (Gauss-Minkowski)
\end{theorem}

\1 Its order $|Cl_k|$ becomes an important invariant and this invariant is called the \textbf{class number} $h_k$ of $k$. It measures the deviation of $k$...

\1 Example: Let $D>0$ be square-free. Then $h_{\Q(\sqrt{-D})} = 1 \iff D\in \{1,2,3,7,11,19,43,67,163\}$. Was only conjectured by Gauss and proven by Baker-Stark-Heegner.

\1 Determining class numbers of field is a very hard problem in general. Still open: Are there infinitely many $D$ with $h_{\Q(\sqrt{D})}=1$? 

\1 The class group being trivial means that something is UFD and then it is an exercise that in Dedekind domains, UFD implies PID? 

\0 \begin{theorem}
    (Dirichlet) $\cO^*_k \cong \mu(k)\oplus \Z^{r_1 + r_2 -1}$ (roots of unity in $k$ with number of embeddings $r_1,r_2$)
\end{theorem}
\textit{Proof strategy:} \enquote{Geometry of numbers}, lattice, convex closed subsets, etc...

\0 \begin{exercise}
    Show that for every non-zero ideal $\cO_k /a$ is finite for all $(0)\neq a$. Hint: First assume $a=p$ is prime.
\end{exercise}

\0 \begin{definition}
    The \textbf{absolute norm} of $(0)\neq a$ is $n(a)=|\cO_k /a|$.
\end{definition}

\0 \begin{exercise}
    For $a\in \cO_k$, we have $n((a)) = |N_{k/\cQ}(a)|$. It is multiplicative, $n(ab)=n(a)n(b)$, so a homomorphism from $J_K$ to $\R_{> 0}$.
\end{exercise}

This is all we need about integrality in number fields.
\end{outline}

\subsection{Decomposition and ramification}

\begin{outline}
Let $p$ be a rational prime. Then $p \cO_k = p_1^{e_1} \ldots p_r^{e_r}$. Moreover note that $\cO_k /p_i$ is a finite field, so $n(p_i) = p_i^{f_i}$. If we now apply $n$ to the decomposition of $p\cO_k$, then we see that $p^d = p_1^{e_1 f_1}\ldots p_r^{e_r f_r}$, so $p_i=p$ for all $i$ and $e_1 f_1 + \ldots + e_r f_r = d$ (fundamental equation). We call $e_i$ ramification index of $p_i$ over $p$ and $f_i$ inertia degree. 

\1 Extreme cases: (all the prime ideals in $\cO_k$ lie over rational primes?)
    \2 $r=d$: $p$ is split.
    \2 $r=1, f_1 = 1$: $p$ ramifies completely. 
    \2 $r=1, e_1 = 1$: $p$ is inert. 

\0 Note: we say $p_i | p$ if and only if $p\cO_k \subseteq p_i$ for a unique rational prime $p$. \enquote{$p_i$ lies over $p$}.

\0 \begin{definition}
    $p$ is called ramified in $k$ if the corresponding ramification index $e_p >1$.\\ 
    $p$ is called ramified in $k$ if $e_p > 1$ for some $p$ over $p$.
\end{definition}

\0 \begin{theorem}
    A rational prime $p$ is ramified in $k$ iff $p | d_k$ (discriminant). 
\end{theorem}

\0 \begin{theorem}
    Almost all $p$ are unramified. 
\end{theorem}

\marginnote{Logically, everything now is ideals (except for maybe ramification).}

(Image). The Galois action permutes the primes over the rational primes. This action is transitive (exercise) and preserves $e_i$ and $f_i$, so the fundamental equation takes the form $d= e f r$. This is already interesting information, since if $k/\cQ$ is cyclic of prime degree, then on the left side we have a prime decomposed in three numbers, so only three of the above extreme cases can occur. This is the classical picture. 
\end{outline}

\subsection{Valuations and completions}

\begin{outline}
\0 Another angle is replacing ideals with valuations. 

\0 \begin{definition}
    A \textbf{valuation} of $k$ is a map $|\cdot| : k\ra \R$ such that for all $x,y\in k$k we have non-negativity, multiplicativity and triangle inequality.
\end{definition}
\marginnote{This is not a valuation, we call the valuation the exponential valuation.}

\1 We dismiss the trivial valuation $|x|=1 \iff x\neq 0$.
\1 Sometimes it can happen that it satisfies something stronger: $|x+y|\leq \max \{ |x|,|y|\}$. Then we call it \textbf{non-archimedean} and \textbf{archimedean} otherwise. 

\1 Example: 
    \2 Archimedean: Let $\sigma: k \xhookrightarrow{} \bC$ and set $|x|_\sigma = |\sigma(x)|$.
    \2 Non-archimedean: Let $p_0 \subseteq \cO_k$ be prime. For $x\in k^*$ we write $x\cO_k = \prod_p p^{v_p(x)}$ and set $|x|_{p_0}:=q^{-v_{p_0}(x)}$ with $q=|\cO_k / p_0|=p^{f_p}$ for $p_0 \cap \Z = (p)$ ($p$-adic valuation). 

\0 \begin{definition}
    Two valuations are equivalent if they differ by scaling, or induce the same topology.
\end{definition}

\0 \begin{theorem}
    The above examples exhaust all valuations on $k$ up to equivalence. 
\end{theorem}
\end{outline}

\marginnote{Lecture 4, 07.11.24}

\begin{outline}
\0 \begin{theorem}
    Ostrowski. 
    1)
    2) 
    exhaust all non trivial valuations on $k$ up to equivalence.
\end{theorem}

\0 \begin{definition}
    The equivalence classes of (non-archimedian/archimedian) valuations on $k$ are called (finite/infinite) places.
\end{definition}

Perks of places: The infinite places complete the picture... They allow for completion, so that also a finite place corresponds to embedding for a complete field. 

\0 \begin{definition}
    $k \xhookrightarrow{} k_v$ is the completion of $k$ with respect to $d_v(x,y)=|x-y|_v$. $k_v=cauchysequences in k / null sequences$ as constant sequences.  
\end{definition}

\0 p-adic numbers, p-adic fields

\0 \begin{definition}
    valuation rings of the valued fields
\end{definition}

\0 \begin{definition}
    completion of $k$ with respect to... 
\end{definition}

\0 Note that $O_{(v)}=O_V \cap k$ and $O_v = \overline{O_{(v)}}$. The rings $O_v$ and $O_{(v)}$ are PIDs with unique maximal ideals $\pi O_v={x\in O_v : v(x) <1}$ and $\pi O_{(v)}=\{x\in O_{(v)}:v(x)<1\}$ so they are discrete valuation rings (DVR).

\0 The up to association unique element $\pi\in O_{(v)}\subseteq O_v$ is called a uniformizer. We have a canonical isomorphism $O_{(v)}/\pi O_{(v)}\rightarrow \cong O_V / \pi O_v$ of the residue field.

\0 \begin{theorem}
    Let $K$ be complete with valuation $v$ and $L/K$ algebraic. Then $v$ extends uniquely to $L$. If $[L:K]=d < \infty$, then $\nabla(x)=\sqrt[d]{v(N_{L/K}(x)}$ for $x\in L$.
\end{theorem}

\0 In particular, $v_p$ on $\Q_p$ extends uniquely to $\overline{\Q}_p$. Given $\sigma:k\xhookrightarrow{} \overline{\Q}_p$, we obtain $v_\sigma := \overline{v_p}\circ \sigma$. If $\tau \in \Gal{\overline{Q_p}/\Q_p}$ then $\overline{v_p}=\overline{v_p}\circ \tau$, so $v_\sigma = v_{\tau \circ \sigma}$. Basically, extensions of valuations are given by embeddings? Idk

\0 \begin{theorem}
    1) Every extension $w$ of $v_p$ from $\Q$ to $k$ is of the form $w=v_\sigma$ for some $\sigma: k \xhookrightarrow{} \overline{\Q}_p$.  
    2) $v_\sigma = v_{\sigma'}$ iff there is $\tau \in \Gal{\overline{Q}_p/\Q_p}$: $\sigma' = \tau \circ \sigma$. 
\end{theorem}

\0 Remark: this also holds for $p=\infty$ when $\Q_\infty = \R$. Hence: complex infinite places are in 1:1 correspondence with conjugate classes of embeddings $\sigma: k \xhookrightarrow{} \bC$, $\sigma(k)\not\subset \R$. Real infinite places correspond $1:1$ to embeddings $\sigma: k \xhookrightarrow{} \R$. Finite places over $p$ correspond 1:1 to conjugacy classes of $\sigma: k\xhookrightarrow{} \overline{Q}_p$ AND also to non-zero prime ideals $p$ of $O_k$ with $p|p$.

\0 Moreover: $k_W = \sigma(k')$ $\Q_p \subseteq \overline{Q}_p$ if $w=\overline{v}_p \circ \sigma$, $\sigma:k\xhookrightarrow{} \overline{Q}_p$. So There is a commutative square 

\begin{tikzcd}
\mathcal{k} \arrow[r] \arrow[d, leftarrow] & \mathcal{k}_w \arrow[d, leftarrow] \\
\mathcal{O} \arrow[r] & \mathcal{O}_p
\end{tikzcd}

showing the global and local side of correspondence ? 

\0 \begin{theorem}
    $k\otimes \Q_p \cong \prod_{w | p} k_w$ and $[k_w : \Q_p] = e_w \cdot f_w$ if $p<\infty$.  
\end{theorem}

\0 \begin{definition}
    The ring of adeles of $k$ is $\bA_k = \prod_{w \in V(k)} k_W$ (with $O_W \subseteq k_W$ cofinite). Adele comes from additive element. The idele group of $k$ is $\bI_k = \bA^*_k$. $k$ embeds diagonally both in $\bA_k$ and $\cI_k$ with discrete image.
\end{definition}
\end{outline}

\subsection{Local-global principle}

\begin{outline}
\0 Let $p\in k[X]$. Suppose $x\in k$ satisfies $p(x)=0$. Then, of course, $x\in k \subset k_v$ defines a solution $x\in k_v$ to $p(x)=0$. If, on the other hand, we find a local solution $x_v \in k_v$ with $p(x_v)=0$ for all $v\in V(k)$, does this imply that there exists a global solution?
    \1 Success Cases: The principle works for:
        \2 Quadratic forms (Minkowski-Hasse)
        \2 Norm equations for cyclic extensions
        \2 Some other special polynomials
    \1 Famous Counterexamples:
        \2 Selmer's cubic: 3x続 + 4y続 + 5z続 = 0
        \2 Genus 1 curves can fail
        \2 Higher degree forms often fail
    \1 Modern Understanding:
        \2 Obstruction is measured by Shafarevich-Tate group
        \2 For genus 0 curves, principle holds
        \2 For genus $\geq$ 1, additional cohomological obstructions appear
        \2 Brauer-Manin obstruction explains many failures
\0 \begin{theorem}
    Hasse norm principle. Let $k/\Q$ be cyclic and $x\in \Q$. Then $x=N_{k/\Q}(y)$ for some $y\in k$ iff $x=N_{k_v/\Q_p}(y_v)$ for some $y_k\in k_v$ for all $v|p$ and all $p\geq \infty$. 
\0 \begin{theorem}
    Hasse principle for central simple algebras. 
\end{theorem}
\end{theorem}
\end{outline}   

\end{document}
  